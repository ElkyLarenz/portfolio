---
const links = [
    { name: 'Home', path: '/' },
    { name: 'Blog', path: '/blog' },
]

const { pathname } = Astro.url
---

<header class="header-border">
    <div class="max-w-4xl mx-auto px-6 py-6">
        <nav class="flex items-center justify-between">
            <a href="/" class="text-xl font-semibold hover:text-[var(--accent)] transition-colors">
                Portfolio
            </a>
            <div class="flex items-center gap-8">
                <ul class="flex gap-8">
                    {links.map(item => (
                        <li>
                            <a
                                href={item.path}
                                class={`hover:text-[var(--accent)] transition-colors ${pathname === item.path ? 'text-[var(--accent)]' : 'text-[var(--muted)]'}`}
                            >
                                {item.name}
                            </a>
                        </li>
                    ))}
                </ul>
                <button
                    id="theme-toggle"
                    class="theme-toggle"
                    aria-label="Toggle theme"
                >
                    <svg id="sun-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                    </svg>
                    <svg id="moon-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                    </svg>
                </button>
            </div>
        </nav>
    </div>
</header>

<style>
    .header-border {
        border-bottom: 1px solid var(--border);
    }

    .theme-toggle {
        width: 2.5rem;
        height: 2.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 0.5rem;
        transition: background-color 0.2s;
        background: none;
        border: none;
        cursor: pointer;
    }

    .theme-toggle:hover {
        background-color: rgba(0, 0, 0, 0.05);
    }

    html.dark .theme-toggle:hover {
        background-color: rgba(255, 255, 255, 0.1);
    }
</style>

<script>
    const themeToggle = document.getElementById('theme-toggle');
    const sunIcon = document.getElementById('sun-icon');
    const moonIcon = document.getElementById('moon-icon');
    const html = document.documentElement;

    // Check for saved theme preference or default to light mode
    const currentTheme = localStorage.getItem('theme') || 'light';

    if (currentTheme === 'dark') {
        html.classList.add('dark');
        sunIcon?.classList.add('hidden');
        moonIcon?.classList.remove('hidden');
    }

    themeToggle?.addEventListener('click', () => {
        const isDark = html.classList.toggle('dark');

        if (isDark) {
            localStorage.setItem('theme', 'dark');
            sunIcon?.classList.add('hidden');
            moonIcon?.classList.remove('hidden');
        } else {
            localStorage.setItem('theme', 'light');
            sunIcon?.classList.remove('hidden');
            moonIcon?.classList.add('hidden');
        }
    });
</script>
