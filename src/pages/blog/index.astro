---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';

const posts = await getCollection('blog');
const sortedPosts = posts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<Layout title="Blog">
  <Header />

  <main class="flex-1">
    <section class="py-24">
      <div class="max-w-4xl mx-auto px-6">
        <h1 class="text-5xl font-bold mb-4">Blog</h1>
        <p class="text-xl text-[var(--muted)] mb-16">
          Thoughts, tutorials, and insights on web development
        </p>

        <div class="space-y-12">
          {sortedPosts.map((post) => (
            <article class="post-border pb-12 last:border-0">
              <a href={`/blog/${post.slug}/`} class="group block">
                <h2 class="text-2xl font-semibold mb-3 group-hover:text-[var(--accent)] transition-colors">
                  {post.data.title}
                </h2>
                <p class="text-[var(--muted)] mb-4 leading-relaxed">
                  {post.data.description}
                </p>
                <time
                  datetime={post.data.pubDate.toISOString()}
                  class="text-sm text-[var(--muted)]"
                >
                  {post.data.pubDate.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
                </time>
              </a>
            </article>
          ))}
        </div>
      </div>
    </section>
  </main>

  <Footer />
</Layout>

<style>
  .post-border {
    border-bottom: 1px solid var(--border);
  }
</style>
